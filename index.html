<!DOCTYPE html>
<html>
<head>
<title>C Puzzle Escape</title>
<style>
body{
  font-family:'Segoe UI',sans-serif;
  background: linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:white;
}
.container{
  width:800px;
  background:#111;
  padding:25px;
  border-radius:15px;
  box-shadow:0 0 25px #00ffcc;
  text-align:center;
}
h2{
  color:#00ffcc;
}
.room{
  background:black;
  padding:15px;
  border-radius:10px;
  text-align:left;
  font-family:Consolas;
  margin:15px 0;
  white-space: pre-wrap;
  color:#0f0;
}
.option{
  background:#222;
  padding:12px;
  margin:8px;
  border-radius:8px;
  cursor:pointer;
  transition:0.3s;
}
.option:hover{
  background:#333;
}
.correct{background:green !important;}
.wrong{background:red !important;}
.progress{height:12px;background:#333;border-radius:5px;margin:15px 0;}
.bar{height:12px;background:lime;width:0%;border-radius:5px;}
#status{margin-top:10px;font-weight:bold;font-size:16px;}
#xp{color:cyan;font-weight:bold;margin-bottom:5px;}
button{padding:10px 20px;margin-top:10px;background:lime;border:none;border-radius:5px;cursor:pointer;font-weight:bold;}
</style>
</head>
<body>
<div class="container" id="game">
<h2>üïπÔ∏è C Puzzle Escape Simulation</h2>
<div id="xp">XP: 0</div>
<div class="progress"><div class="bar"></div></div>
<div class="room" id="room"></div>
<div id="options"></div>
<p id="status"></p>
<button onclick="nextRoom()">Next Room</button>
</div>

<script>
let level=0;
let xp=0;

let rooms=[
{
desc:"Room 1: Fix this C code:\n#include<stdio.h>\nint main(){\nprintf(\"Hi\")\nreturn 0;\n}",
options:["Missing semicolon","Wrong header","No main"],answer:0
},
{
desc:"Room 2: Array issue:\nint arr[3]={1,2,3,4};",
options:["Array overflow","Syntax correct","Index ok"],answer:0
},
{
desc:"Room 3: Pointer usage:\nint *p;\nprintf(\"%d\",p);",
options:["Pointer not initialized","Correct","No error"],answer:0
},
{
desc:"Room 4: Loop bug:\nfor(int i=0;i<5;i++)\nprintf(\"%d\",i)",
options:["Missing braces","Missing semicolon","Loop correct"],answer:1
},
{
desc:"Room 5: Condition bug:\nint x=5;\nif(x=10){printf(\"Yes\");}",
options:["Use == for comparison","Missing semicolon","Correct"],answer:0
}
];

function loadRoom(){
  if(level>=rooms.length) return;
  let r=rooms[level];
  document.getElementById("room").innerText=r.desc;
  let html="";
  r.options.forEach((opt,i)=>{
    html+=`<div class="option" onclick="checkAns(this,${i})">${opt}</div>`;
  });
  document.getElementById("options").innerHTML=html;
  document.getElementById("status").innerText="";
  document.getElementById("xp").innerText="XP: "+xp;
  updateProgress();
}

function checkAns(el,choice){
  let r=rooms[level];
  let ops=document.querySelectorAll(".option");
  ops.forEach(o=>o.style.pointerEvents="none");
  if(choice===r.answer){
    el.classList.add("correct");
    xp+=10;
    document.getElementById("status").innerText="‚úÖ Bug Fixed! +10 XP";
  }else{
    el.classList.add("wrong");
    ops[r.answer].classList.add("correct");
    document.getElementById("status").innerText="‚ùå Wrong Debug";
  }
  document.getElementById("xp").innerText="XP: "+xp;
}

function nextRoom(){
  level++;
  if(level<rooms.length) loadRoom();
  else finishGame();
}

function updateProgress(){
  let percent=(level/rooms.length)*100;
  document.querySelector(".bar").style.width=percent+"%";
}

function finishGame(){
  document.getElementById("game").innerHTML=
  `<h2>üèÜ ESCAPE SIMULATION COMPLETED</h2>
   <h3>Total XP : ${xp}</h3>
   <h3>Rank : ${xp>=40?"Elite C Programmer":"Junior Programmer"}</h3>`;
}

// ‚úÖ Ensure first question prints immediately
window.addEventListener("DOMContentLoaded", loadRoom);
</script>
</body>
</html>